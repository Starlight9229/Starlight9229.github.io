<!DOCTYPE html>
<html>
    <head>
        <title>Starlight's non-verbal writing page</title>
        <link rel="stylesheet" href="http://citadel.ghs.vic.edu.au/CAL0022/non-verb/bootstrap-non-verb.css">
        <link rel="stylesheet" href="http://citadel.ghs.vic.edu.au/CAL0022/non-verb/style-non-verb.css">



    </head>
<body>
    <h2><a href="http://citadel.ghs.vic.edu.au/CAL0022/">Back to main page</a></h2>
    <h2 class="big-text">WIP<br>MAY NOT WORK AS INTENDED<br>YOU HAVE BEEN WARNED</h2>
    <form name="sentence">
    <div class="indent">

            <label for="writtentext" class="form-label mt-4">Write here:</label>
            <div class="darkbluelight-dark-gradient-bg">
            <input type="text" class="form-control" id="writtentext" value=""></input>
            </div>
          </div>
          <input type="submit" hidden onclick="save()"/>
          <div class="indent">
          <button type="button" class="btn btn-success" id="writtentext" onclick="save()">save sentence</button>
        <button type="button" class="btn btn-danger" onclick="clearsaved()">clear saved sentences</button>
    <button type="button" class="btn btn-info" onclick="showhidecmd()">show/hide commands</button>
    <button type="button" class="btn btn-info" onclick="sendData()">placeholder button</button>
    </div>
</form>
<div class="cyandark-light-gradient" id="cmd">Quick commands and it's uses: <br> '/c' can clear the chat history <br> '/h' shows or hides the commands <br> Pressing 'ENTER' saves the sentence</div>
    <div id="message" class="writtensentences"></div>
    <div class="writtensentences" id="textFile"></div>

<script>
    message = "";
    currenttext = "";
    document.getElementById("cmd").style.display = "none";
    function load() {
        
    var textGet = new XMLHttpRequest();
    console.log('step 1 (' + textGet.readyState  + ')')
    textGet.open("GET", "http://citadel.ghs.vic.edu.au/CAL0022/non-verb/savedMessages.txt", true);
    textGet.send();
    console.log('step 2 (' + textGet.readyState  + ')')
    textGet.onreadystatechange = function() {
        console.log('updated to ' + textGet.readyState)
      if (textGet.readyState === 4) {  // Makes sure the document is ready to parse
        console.log('step 3')
        if (textGet.status === 200) {  // Makes sure it's found the file
          text = textGet.responseText;
          document.getElementById("textFile").innerHTML = text;
          console.log(text)
        }
      }
    }
}
load();
  // pre-fill FormData from the form
  function sendData() {
  let formData = new FormData(document.forms.sentence);

  // add one more field
  formData.append("middle", "Lee");

  // send it out
  let xhr = new XMLHttpRequest();
  xhr.open("POST", "http://citadel.ghs.vic.edu.au/CAL0022/non-verb/savedMessages.txt");
  xhr.send(formData);

  xhr.onload = () => alert(xhr.response);
  }
    function showhidecmd() {
        if(document.getElementById("cmd").style.display == "block") {
            document.getElementById("cmd").style.animation = "ease-out"
        document.getElementById("cmd").style.display = "none";
        }else{
            document.getElementById("cmd").style.display = "block";
        }
        
    }
function save() {
    event.preventDefault()


if(document.getElementById("writtentext").value == "/c") {
    message = "";
    currenttext = "";
}
if(document.getElementById("writtentext").value == "/h") {
 showhidecmd();
}
if(document.getElementById("writtentext").value != "/c" && document.getElementById("writtentext").value != "/h") {
    sendData(document.getElementById("writtentext").value + "<br>");



console.log(currenttext);
    message = currenttext;
}
let clear = document.getElementById("writtentext");
console.log(clear);
clear.value = "";
document.getElementById("message").innerHTML = message;
document.getElementById("message").style.visibility = "visible";
}
function clearsaved() {
    message = "";
    currenttext = "";
    document.getElementById("message").innerHTML = message;
    
}


</script>

</body>




</html>